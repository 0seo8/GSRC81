# ë°”í…€ì‹œíŠ¸ ì¹´ë“œ ë ˆì´ì•„ì›ƒ ë¶„ì„

## ğŸ“¸ ì›í•˜ëŠ” ë””ìì¸ (img.png ê¸°ì¤€)

### ì™¼ìª½ - 1ê°œ ì¹´ë“œ
- ë…¸ë€ìƒ‰ ì¹´ë“œ 1ê°œë§Œ í‘œì‹œ
- ë°”í…€ì‹œíŠ¸ ë°”ë‹¥ì— ë°°ì¹˜
- ì „ì²´ ë‘¥ê·¼ ëª¨ì„œë¦¬ (borderRadius: 45px)
- ë†’ì´: 130px (8.125rem)
- **ìƒíƒœ**: âœ… ì •ìƒ

### ì¤‘ê°„ - 2ê°œ ì¹´ë“œ
- **ë…¸ë€ìƒ‰ ì¹´ë“œ**: ì•ì— ë³´ì„ (zIndex: 2), ì•„ë˜ ìœ„ì¹˜ (bottom: 0)
- **íšŒìƒ‰ ì¹´ë“œ**: ë’¤ì— ë³´ì„ (zIndex: 1), ìœ„ ìœ„ì¹˜ (bottom: 5.4375rem / 87px)
- ì¹´ë“œê°€ ê²¹ì³ì§„ ìŠ¤íƒ í˜•íƒœ
- **zIndex ë°°ì¹˜**: âœ… ì •ìƒ
- **ë°”í…€ì‹œíŠ¸ ë†’ì´**: âœ… 60vhë¡œ í•´ê²° ì™„ë£Œ

### ì˜¤ë¥¸ìª½ - 3ê°œ ì´ìƒ ì¹´ë“œ
- ì²« ë²ˆì§¸ ì¹´ë“œ: bottom -5rem (ìˆ¨ê¹€)
- ë‘ ë²ˆì§¸ ì¹´ë“œ: bottom 0 (ê¸°ì¤€ì )
- ì„¸ ë²ˆì§¸ ì´ìƒ: 8.875remë¶€í„° 5.4375remì”© ê°„ê²©
- ìŠ¤í¬ë¡¤ ê°€ëŠ¥
- **ìƒíƒœ**: âœ… ì •ìƒ

---

## âœ… ìµœì¢… ì ìš© ë°©ì•ˆ

### **ì±„íƒ: vh(ë°”í…€ì‹œíŠ¸) + rem(ì¹´ë“œ) í˜¼ìš©** â­

**ì„ íƒ ì´ìœ **:
- ë°”í…€ì‹œíŠ¸ëŠ” í™”ë©´ í¬ê¸°ì— ë¹„ë¡€ (60vh)
- ì¹´ë“œëŠ” ê³ ì • í¬ê¸° ìœ ì§€ (rem) - ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜

**ì¥ì **:
- ë°”í…€ì‹œíŠ¸ê°€ í™”ë©´ í¬ê¸°ì— ë”°ë¼ ìë™ ì¡°ì •
- ì¹´ë“œ í¬ê¸°ëŠ” ì¼ì •í•˜ê²Œ ìœ ì§€ë˜ì–´ ê°€ë…ì„± ì¢‹ìŒ
- ë””ìì¸ ì˜ë„ëŒ€ë¡œ êµ¬í˜„ ê°€ëŠ¥

**ë‹¨ì **:
- ë§¤ìš° ì‘ì€ í™”ë©´(iPhone SE ë“±)ì—ì„œ ì¹´ë“œê°€ ì˜ë¦´ ê°€ëŠ¥ì„± ìˆìŒ
- í•˜ì§€ë§Œ 60vhë¡œ ì¶©ë¶„í•œ ì—¬ìœ  í™•ë³´

---

## ğŸ”§ í˜„ì¬ êµ¬í˜„ ìƒíƒœ

### 1. **ë°”í…€ì‹œíŠ¸ ë†’ì´** (`src/hooks/use-bottom-sheet-snap.ts`)

```typescript
case "medium":
  return "60vh"; // 50vh â†’ 60vhë¡œ ì¦ê°€ âœ…
case "full":
  return "95vh";
```

**ë³€ê²½ ì‚¬í•­**: 50vh â†’ 60vh
**íš¨ê³¼**: 2ê°œ ì¹´ë“œ ì˜ë¦¼ ë¬¸ì œ í•´ê²°

---

### 2. **ì¹´ë“œ ë ˆì´ì•„ì›ƒ** (`src/utils/card-layout.ts`)

#### 1ê°œ ì¹´ë“œ
```typescript
height: "8.125rem"  // 130px
bottom: "0"
borderRadius: "2.8125rem" // ì „ì²´ ë‘¥ê·¼
zIndex: 1
```

#### 2ê°œ ì¹´ë“œ
```typescript
// ì²« ë²ˆì§¸ (index 0)
height: "8.125rem"  // 130px
bottom: "0"         // ë°”ë‹¥
zIndex: 2          // ì•ì— ë³´ì„ âœ…

// ë‘ ë²ˆì§¸ (index 1)
height: "11.25rem"  // 180px
bottom: "5.4375rem" // 87px ìœ„
zIndex: 1          // ë’¤ì— ë³´ì„ âœ…
```

**ì‹œê°ì  ê²°ê³¼**:
```
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† 267px (16.6875rem)
      â”‚  íšŒìƒ‰ ì¹´ë“œ   â”‚
      â”‚  (180px)    â”‚
      â”‚  zIndex: 1  â”‚
87px  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† ê²¹ì¹¨ ì‹œì‘
      â”‚  ë…¸ë€ ì¹´ë“œ   â”‚
      â”‚  (130px)    â”‚
      â”‚  zIndex: 2  â”‚ â† ì•ì— ë³´ì„ âœ…
 0px  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3ê°œ ì´ìƒ ì¹´ë“œ
```typescript
// ì²« ë²ˆì§¸ (index 0)
height: "8.125rem"
bottom: "-5rem"     // -80px (ìˆ¨ê¹€)
zIndex: totalCourses

// ë‘ ë²ˆì§¸ (index 1)
height: "11.25rem"
bottom: "0"         // ê¸°ì¤€ì 
zIndex: totalCourses - 1

// ì„¸ ë²ˆì§¸+ (index 2+)
height: "11.25rem"
bottom: "8.875rem + (index - 2) Ã— 5.4375rem" // 142pxë¶€í„° 87pxì”©
zIndex: totalCourses - index
```

---

### 3. **ìŠ¤íƒ ë†’ì´ ê³„ì‚°** (`src/components/map/refactored-course-card-stack.tsx`)

```typescript
// 1ê°œ
return "100%"; // ìŠ¤í¬ë¡¤ ì˜ì—­ì— ê½‰ ì°¸

// 2ê°œ
return "16.6875rem"; // 5.4375rem + 11.25rem = 267px

// 3ê°œ ì´ìƒ
const lastCardBottom = lastCardIndex Ã— 5.4375;
const totalHeight = lastCardBottom + 11.25;
return `${totalHeight}rem`;
```

**âš ï¸ ì£¼ì˜**: 3ê°œ ì´ìƒì¼ ë•Œ ê³„ì‚°ì‹ì´ ì‹¤ì œ ë ˆì´ì•„ì›ƒê³¼ ì•½ê°„ ë‹¤ë¦„
- ì‹¤ì œ: 1ë²ˆ(-5rem), 2ë²ˆ(0), 3ë²ˆ(8.875rem), 4ë²ˆ(14.3125rem)...
- ê³„ì‚°: index Ã— 5.4375 + 11.25

---

### 4. **ì¹´ë“œ ì»¨í…Œì´ë„ˆ** (`src/components/map/refactored-course-card-stack.tsx:43-45`)

```tsx
<div
  className="relative w-full font-sans mb-0 flex flex-col justify-end"
  style={{ height: stackHeight, minHeight: "100%" }}
>
```

**í˜„ì¬ ì´ìŠˆ**:
- `minHeight: "100%"` ë•Œë¬¸ì— ì¹´ë“œê°€ ë°”í…€ì‹œíŠ¸ ë°”ë‹¥ì—ì„œ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŒ
- ì¹´ë“œëŠ” `absolute` í¬ì§€ì…˜ì´ë¼ ì´ ì»¨í…Œì´ë„ˆê°€ ê¸°ì¤€ì 
- `justify-end`ëŠ” ì¹´ë“œê°€ absoluteë¼ ì˜í–¥ ì—†ìŒ

**ê°œì„  ë°©ì•ˆ** (ì„ íƒì‚¬í•­):
```tsx
// minHeight ì œê±°
style={{ height: stackHeight }}
```

---

### 5. **ì¹´ë“œ ì—¬ë°±** (`src/components/map/course-card.tsx:60`)

```tsx
className="absolute left-0 right-0 px-[41px] py-[20px] cursor-pointer"
```

**í˜„ì¬ ì—¬ë°±**:
- ì¢Œìš° íŒ¨ë”©: `px-[41px]` = 41px
- ìƒí•˜ íŒ¨ë”©: `py-[20px]` = 20px

**ë°”í…€ì‹œíŠ¸ ì—¬ë°±**:
- `fixed bottom-2 left-2 right-2` = 8px (0.5rem)

**ì´ ì¢Œìš° ê°„ê²©**: 41px + 8px = 49px

---

### 6. **isExpanded ë¡œì§** (`src/components/map/course-card.tsx:31-44`)

```typescript
// 3ê°œ ì´ìƒ + full ëª¨ë“œì¼ ë•Œ
return `${currentBottom + 5}rem`; // ëª¨ë“  ì¹´ë“œë¥¼ 80px ìœ„ë¡œ
```

**íš¨ê³¼**:
- ì²« ë²ˆì§¸: -5rem â†’ 0rem (í™”ë©´ì— ë‚˜íƒ€ë‚¨)
- ë‘ ë²ˆì§¸: 0rem â†’ 5rem (ìœ„ë¡œ ì´ë™)
- ì„¸ ë²ˆì§¸: 8.875rem â†’ 13.875rem (ë” ìœ„ë¡œ)

---

## ğŸ“Š ë†’ì´ ë¹„êµ (iPhone X ê¸°ì¤€, 812px)

| ìƒí™© | ë°”í…€ì‹œíŠ¸ (60vh) | ì¹´ë“œ ìŠ¤íƒ | í—¤ë” | ì—¬ìœ  ê³µê°„ | ìƒíƒœ |
|------|----------------|----------|------|-----------|------|
| 1ê°œ ì¹´ë“œ | 487px | ~130px | ~100px | ~257px | âœ… ì¶©ë¶„ |
| 2ê°œ ì¹´ë“œ | 487px | 267px | ~100px | ~120px | âœ… í•´ê²° |
| 3ê°œ ì¹´ë“œ | 487px | ìŠ¤í¬ë¡¤ | ~100px | - | âœ… ì •ìƒ |

**ê³„ì‚°**:
- 60vh = 812px Ã— 0.6 = 487px
- 2ê°œ ì¹´ë“œ ìŠ¤íƒ: 87px + 180px = 267px
- í—¤ë” + ì—¬ë°±: ~100px
- ì—¬ìœ : 487 - 267 - 100 = 120px âœ…

---

## ğŸ“ ìˆ˜ì • ì™„ë£Œ íŒŒì¼

1. âœ… `src/hooks/use-bottom-sheet-snap.ts` - medium 60vhë¡œ ì¦ê°€
2. âœ… `src/utils/card-layout.ts` - rem ë‹¨ìœ„ ìœ ì§€
3. âœ… `src/components/map/refactored-course-card-stack.tsx` - rem ë‹¨ìœ„ ê³„ì‚°
4. âœ… `src/components/map/course-card.tsx` - rem ë‹¨ìœ„ ìœ ì§€

---

## ğŸ› ë‚¨ì€ ì´ìŠˆ

### 1. **ì¹´ë“œê°€ ë°”í…€ì‹œíŠ¸ ë°”ë‹¥ì—ì„œ ë–¨ì–´ì§** (img_3.png)

**ì›ì¸**:
```tsx
// src/components/map/refactored-course-card-stack.tsx:45
style={{ height: stackHeight, minHeight: "100%" }}
//                              â†‘ ì´ê²ƒ ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆê°€ ì»¤ì§
```

**í•´ê²° ë°©ë²•**:
```tsx
// minHeight ì œê±°
style={{ height: stackHeight }}
```

---

### 2. **3ê°œ ì´ìƒ ìŠ¤íƒ ë†’ì´ ê³„ì‚° ë¶€ì •í™•**

**í˜„ì¬ ê³„ì‚°**:
```typescript
const lastCardBottom = lastCardIndex Ã— 5.4375;
const totalHeight = lastCardBottom + 11.25;
```

**ì‹¤ì œ ë ˆì´ì•„ì›ƒ**:
- index 0: -5rem
- index 1: 0rem
- index 2: 8.875rem
- index 3: 14.3125rem (8.875 + 5.4375)

**ìˆ˜ì • í•„ìš”**:
```typescript
// index 1ì´ ê¸°ì¤€ì (0)ì´ë¯€ë¡œ
const lastCardBottom = index === 0 ? -5 :
                       index === 1 ? 0 :
                       8.875 + (index - 2) Ã— 5.4375;
```

---

## ğŸ“Œ ìˆ˜ì • ë‚´ì—­

### 2025-01-22
- [x] 2ê°œ ì¹´ë“œ ì˜ë¦¼ ë¬¸ì œ ë¶„ì„ ì™„ë£Œ
- [x] vh + rem í˜¼ìš© ë¬¸ì œ íŒŒì•…
- [x] **ìµœì¢… ì±„íƒ: vh(ë°”í…€ì‹œíŠ¸) + rem(ì¹´ë“œ) í˜¼ìš©**
  - ë°”í…€ì‹œíŠ¸: 60vh
  - ì¹´ë“œ ë†’ì´: 8.125rem / 11.25rem
  - ì¹´ë“œ ê°„ê²©: 5.4375rem
  - isExpanded: +5rem
- [x] ë°”í…€ì‹œíŠ¸ ë†’ì´ 60vhë¡œ ì¦ê°€ ì™„ë£Œ
- [ ] ì¹´ë“œ ë°”ë‹¥ ë–¨ì–´ì§ ì´ìŠˆ í•´ê²° (minHeight ì œê±°)
- [ ] 3ê°œ ì´ìƒ ìŠ¤íƒ ë†’ì´ ê³„ì‚° ìˆ˜ì •
- [ ] ì‹¤ì œ ë””ë°”ì´ìŠ¤ í…ŒìŠ¤íŠ¸

---

## ğŸ¯ ê²°ë¡ 

**vh + rem í˜¼ìš© ë°©ì‹**ìœ¼ë¡œ:
1. âœ… 2ê°œ ì¹´ë“œ ì˜ë¦¼ ë¬¸ì œ í•´ê²° (60vh)
2. âœ… ì¹´ë“œ í¬ê¸° ì¼ì •í•˜ê²Œ ìœ ì§€ (rem)
3. âœ… ë°”í…€ì‹œíŠ¸ëŠ” í™”ë©´ í¬ê¸°ì— ë¹„ë¡€ (vh)
4. âš ï¸ ë‚¨ì€ ì´ìŠˆ: ì¹´ë“œ ë°”ë‹¥ ì—¬ë°± (minHeight ì œê±° í•„ìš”)

**ë””ìì¸ ì˜ë„**: ì¹´ë“œëŠ” ê³ ì • í¬ê¸°, ë°”í…€ì‹œíŠ¸ëŠ” ìœ ì—°í•˜ê²Œ!
