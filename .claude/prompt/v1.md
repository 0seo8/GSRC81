⏺ 🗺️ GSRC81 MAPS - 코스 상세 페이지 완성 프롬프트

📋 현재 상황

- ✅ 지도 클릭 → 댓글 등록 기능 완료
- ✅ 댓글 목록 표시 및 말풍선 렌더링 완료
- ❌ PDF 디자인(페이지 19-23) 대비 미구현 기능들 존재

🎯 구현 목표

PDF 페이지 19-23의 "구파발천 정기런" 코스 상세 페이지와 동일한 UI/UX 구현

📊 순차적 구현 계획

1단계: 코스 정보 상세 표시 ⭐ (우선순위)

참고: PDF 페이지 19-23의 상단 정보 카드

DB 데이터 활용:
// courses 테이블 데이터
{
title: "구파발천 정기런",
distance_km: 5,
difficulty: "쉬움",
detail_description: "진관천을 한 바퀴 왕복해 도는 코스입니다...",
gpx_data: {
stats: {
estimatedDuration: 1800, // 30분 (초 단위)
elevationGain: 32
}
},
created_by: "GSRC81"
}

구현 요구사항:

- 거리/시간/고도/난이도를 4개 컬럼으로 표시
- "BY GSRC81" 작성자 정보 표시
- PDF와 동일한 카드 스타일 디자인

2단계: 코스 설명 텍스트 표시

참고: PDF 페이지 19-23의 코스 설명 섹션

구현 요구사항:

- detail_description 필드 내용 표시
- 마크다운 스타일 텍스트 렌더링
- 코스 정보 카드 하단에 배치

3단계: 코스 갤러리 UI 구현

참고: PDF 페이지 19-23 하단의 GSRC81 단체 사진

DB 데이터 활용:
// course_photos 테이블
{
id: string,
course_id: string,
file_url: string,
caption: string,
uploaded_by: string,
created_at: string
}

구현 요구사항:

- 그리드 레이아웃으로 사진 갤러리 표시
- 이미지 클릭시 모달 확대보기
- 사진 업로드 버튼 추가

4단계: 댓글 사진 첨부 기능

DB 데이터 활용:
// course_comment_photos 테이블
{
id: string,
comment_id: string,
file_url: string,
created_at: string
}

구현 요구사항:

- 댓글 입력 모달에 사진 업로드 기능 추가
- 댓글 표시시 첨부 이미지도 렌더링
- 이미지 미리보기 기능

5단계: 사진 업로드 API 연동

Supabase Storage 활용:
// Storage Buckets

- course-images (코스 관련 이미지)
- comment-images (댓글 첨부 이미지)

// API 함수들

- uploadCommentPhoto()
- uploadCoursePhoto()
- deletePhoto()

🚀 실행 지시사항

1. 1단계부터 순차적으로 구현
2. 기존 코드 최대한 활용 (TrailMapV2, CourseInfo 컴포넌트 확장)
3. PDF 디자인 100% 매칭 (색상, 레이아웃, 타이포그래피)
4. TypeScript 타입 안전성 보장
5. 각 단계 완료시 TodoWrite로 진행상황 업데이트

📁 주요 수정 파일들

- /src/components/map/trail-map-v2.tsx (메인 컴포넌트)
- /src/components/map/trail-map/components/course-info.tsx (코스 정보)
- /src/components/comment-modal.tsx (댓글 모달)
- /src/lib/comments.ts (댓글 API)
- 새로 생성할 갤러리 관련 컴포넌트들

현재 1단계 "코스 정보 상세 표시"부터 시작해주세요.
