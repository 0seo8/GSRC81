
#  GSRC81 MAPS í†µí•© ê°œì„  ê¸°íšì„œ (2025 Q4) â€” í”„ë¡¬í”„íŠ¸ ë²„ì „

**í”„ë¡¬í”„íŠ¸ ì œëª©:**

> ğŸ”§ â€œGSRC81 Maps 2025 Q4 í†µí•© ê¸°íšì„œ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œ / ì½”ë“œ / DB ì„¤ê³„ ìƒì„±â€

---

## ğŸ§­ í”„ë¡¬í”„íŠ¸ ë‚´ìš©

ë„ˆëŠ” ì§€ê¸ˆ **GSRC81 Maps í”„ë¡œì íŠ¸ì˜ ê¸°íš/ê°œë°œ ë‹´ë‹¹ì**ì•¼.
ì•„ë˜ ë‚´ìš©ì€ **2025 Q4 ê¸°ì¤€ ìµœì‹  ê¸°íš ë° ì„¤ê³„ ëª…ì„¸ì„œ**ì•¼.
ì´ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œ, ì„¤ê³„, ì½”ë“œ, DB ìŠ¤í‚¤ë§ˆ, UI í”Œë¡œìš° ë“±ì„ ìƒì„±í•´ì¤˜.

---

### ğŸ“˜ 1. í”„ë¡œì íŠ¸ ê°œìš”

**í”„ë¡œì íŠ¸ëª…:** GSRC81 Maps
**ëª©í‘œ:**

1. UI/UX ê°œì„  ë° GSRC81 ë¸Œëœë“œ í†µì¼ì„± ê°•í™”
2. GPX ë°ì´í„° êµ¬ì¡°ë¥¼ JSONB ê¸°ë°˜ìœ¼ë¡œ ë‹¨ì¼í™”
3. ë¹„í–‰ëª¨ë“œ(Flight Mode)ì™€ ì§€ì ë³„ ëŒ“ê¸€(Comments by Waypoint) ì¶”ê°€

---

### ğŸ§­ 2. ì‚¬ìš©ì í˜ì´ì§€

#### 2.1 ëœë”©

* GSRC81 ë¸Œëœë“œ ì• ë‹ˆë©”ì´ì…˜(í¬ë£¨ ëª¨ì…˜) ì ìš©
* ì²« ì§„ì… ì‹œ ë¸Œëœë“œ ê²½í—˜ ì¤‘ì‹¬ ì—°ì¶œ
* ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ, í˜‘ì˜í˜• ì• ë‹ˆë©”ì´ì…˜

#### 2.2 ë¡œê·¸ì¸

* ë¹„ë°€ë²ˆí˜¸ / ê´€ë¦¬ì / ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸ ì§€ì›
* ì „ì²´ ê·¸ë˜í”½ í†¤ í†µì¼
* í”„ë¡œí•„ ì´ë¯¸ì§€ í‘œì‹œ

#### 2.3 ì „ì²´ ë§µ

* ì§€ë„ ê·¸ë˜í”½ ìœ ì§€
* ìŠ¤íƒ€íŠ¸ í¬ì¸íŠ¸ ê·¸ë˜í”½ ë¦¬ë””ìì¸
* í™•ëŒ€ ì‹œ í´ëŸ¬ìŠ¤í„°ë§ ì ìš©
* JSONB ë°ì´í„°ì—ì„œ ì¢Œí‘œ ì§ì ‘ ì½ê¸°

#### 2.4 ë£¨íŠ¸ ë¦¬ìŠ¤íŠ¸

* ë£¨íŠ¸ ìˆ˜ì— ë”°ë¥¸ ì¹´ë“œí˜• ìë™ ì¡°ì •
* ìŠ¤í¬ë¡¤ ì•”ì‹œ ì¶”ê°€
* ê±°ë¦¬Â·ì‹œê°„ ë“±ì€ gpx_data â†’ STORED ì»¬ëŸ¼ í‘œì‹œ

#### 2.5 ë£¨íŠ¸ ìƒì„¸ (í•µì‹¬ ê°œì„ )

**ğŸ›° ë¹„í–‰ëª¨ë“œ (Flight Mode)**

* GPX ê²½ë¡œ ìë™ ì¬ìƒ (points ë°°ì—´ ìˆœì°¨ ì´ë™)
* ì¹´ë©”ë¼ ì‹œì  ìë™ ì´ë™
* ì¬ìƒ/ì¼ì‹œì •ì§€/ì†ë„ì¡°ì ˆ UI
* í•˜ë‹¨ ê³ ì •í˜• ì»¨íŠ¸ë¡¤ ë°”

**ğŸ’¬ ì§€ì ë³„ ëŒ“ê¸€ (Waypoint Comments)**

* ê° í¬ì¸íŠ¸ í´ë¦­ ì‹œ ë§í’ì„  íŒì—…
* ë¡œê·¸ì¸ ì‚¬ìš©ì ëŒ“ê¸€ ì‘ì„± ê°€ëŠ¥
* ê´€ë¦¬ì ëŒ“ê¸€ ê´€ë¦¬ ê¸°ëŠ¥
* ì‹¤ì‹œê°„ ë°˜ì˜

**ë°ì´í„° ì˜ˆì‹œ**

```json
{
  "points": [
    { "lat": 37.544, "lng": 127.038, "ele": 14.2 },
    {
      "lat": 37.545, "lng": 127.041,
      "comments": [
        { "id": "c1", "user": "í™ê¸¸ë™", "content": "ì „ë§ì´ ì¢‹ì•„ìš”", "createdAt": "2025-10-05T09:00:00Z" }
      ]
    }
  ]
}
```

---

### ğŸ§‘â€ğŸ’¼ 3. ê´€ë¦¬ì í˜ì´ì§€

* ì‹œê°„: 90ë¶„ â†’ â€œ1ì‹œê°„ 30ë¶„â€
* ê±°ë¦¬: ì†Œìˆ˜ì  ì…‹ì§¸ ìë¦¬ í‘œì‹œ
* ê°€ê¹Œìš´ ì§€í•˜ì² ì—­ í•„ë“œ ì œê±°
* ëŒ“ê¸€ ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€

---

### ğŸ—„ï¸ 4. DB êµ¬ì¡°

| í…Œì´ë¸”                 | ì—­í•                          |
| ------------------- | -------------------------- |
| `courses_v2`        | GPX ê²½ë¡œ ë° í†µê³„ ë°ì´í„° (JSONB í†µí•©) |
| `course_comments`   | ì§€ì ë³„ ëŒ“ê¸€                     |
| `users`             | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‚¬ìš©ì                |
| `course_likes` (ì„ íƒ) | ì¢‹ì•„ìš”/ë¶ë§ˆí¬ í™•ì¥                 |

---

#### courses_v2

```sql
CREATE TABLE courses_v2 (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title VARCHAR(200) NOT NULL,
  description TEXT,
  difficulty VARCHAR(20) CHECK (difficulty IN ('easy', 'medium', 'hard')),
  nearest_station VARCHAR(100),
  gpx_data JSONB NOT NULL,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  distance_km DECIMAL(6,2) GENERATED ALWAYS AS 
      ((gpx_data->'stats'->>'totalDistance')::DECIMAL) STORED,
  elevation_gain DECIMAL(6,2) GENERATED ALWAYS AS 
      ((gpx_data->'stats'->>'elevationGain')::DECIMAL) STORED
);
CREATE INDEX idx_gpx_data_gin ON courses_v2 USING GIN (gpx_data jsonb_path_ops);
```

#### course_comments

```sql
CREATE TABLE course_comments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  course_id UUID REFERENCES courses_v2(id) ON DELETE CASCADE,
  point_index INT,
  lat DECIMAL(9,6),
  lng DECIMAL(9,6),
  user_id UUID REFERENCES users(id),
  username VARCHAR(100),
  content TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### users

```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  provider VARCHAR(50) DEFAULT 'kakao',
  provider_id VARCHAR(200),
  username VARCHAR(100),
  email VARCHAR(200),
  profile_image TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

### ğŸ§± UnifiedGPXData (v1.1)

```typescript
interface UnifiedGPXData {
  version: "1.1";
  points: Array<{
    lat: number;
    lng: number;
    ele?: number;
    dist?: number;
    comments?: Array<{
      id: string;
      user_id: string;
      username: string;
      content: string;
      createdAt: string;
    }>;
  }>;
  bounds: { minLat: number; maxLat: number; minLng: number; maxLng: number };
  stats: {
    totalDistance: number;
    elevationGain: number;
    elevationLoss: number;
    estimatedDuration: number;
  };
  metadata?: {
    originalFileName?: string;
    uploadedAt?: string;
    processedAt?: string;
  };
}
```

---

### âš™ï¸ 5. ë§ˆì´ê·¸ë ˆì´ì…˜ í”Œëœ

| ë‹¨ê³„  | ì‘ì—… ë‚´ìš©                                  |
| --- | -------------------------------------- |
| 1ï¸âƒ£ | `courses_v2` ìƒì„± ë° ë°±ì—…                   |
| 2ï¸âƒ£ | `courses` / `course_points` â†’ JSONB ë³€í™˜ |
| 3ï¸âƒ£ | ë³‘í–‰ ìš´ì˜ (2ì£¼)                             |
| 4ï¸âƒ£ | ì™„ì „ ì „í™˜ ë° ë°±ì—… í…Œì´ë¸” ì‚­ì œ                      |
| 5ï¸âƒ£ | ëŒ“ê¸€/ë¹„í–‰ëª¨ë“œ ê¸°ëŠ¥ ì ì§„ì  ë°°í¬                      |

---

### ğŸ“ˆ 6. ê¸°ëŒ€ íš¨ê³¼

* ì¤‘ë³µ í…Œì´ë¸” ì œê±°ë¡œ ë°ì´í„° ì¼ì›í™”
* GIN ì¸ë±ìŠ¤ ê¸°ë°˜ ì¡°íšŒ ì†ë„ í–¥ìƒ (3~5ë°°)
* JSONB í™•ì¥ì„±ìœ¼ë¡œ í–¥í›„ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´
* UI/UX ì¼ì²´ê° ê°•í™”
* ì‚¬ìš©ì ì°¸ì—¬í˜• ì¸í„°ë™ì…˜ (ë¹„í–‰ëª¨ë“œ + ëŒ“ê¸€)

---

### ğŸ“ 7. ì°¸ê³ 

* ì ìš© ëŒ€ìƒ íŒŒì¼:
  `trail-map.tsx`, `trail-map-db.tsx`, `gpx-loader.ts`, `GPX-upload-form.tsx`
* í…ŒìŠ¤íŠ¸ í•­ëª©:

  * GPX ì—…ë¡œë“œ
  * ë§µ ë Œë”ë§
  * ë¹„í–‰ëª¨ë“œ ê²½ë¡œ ì¬ìƒ
  * ëŒ“ê¸€ CRUD
  * DB ì„±ëŠ¥ ë¹„êµ



